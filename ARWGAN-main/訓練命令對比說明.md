# è¨“ç·´å‘½ä»¤å°æ¯”èªªæ˜

## ğŸ“‹ å…©ç¨®è¨“ç·´æ–¹å¼å°æ¯”

### æ–¹å¼ 1: ä½¿ç”¨è…³æœ¬ï¼ˆæ¨è–¦ï¼‰
```bash
./run_training.sh --train --epochs 10 --batch 16 --data-dir data/coco2017
```

### æ–¹å¼ 2: ç›´æ¥ä½¿ç”¨ Python å‘½ä»¤
```bash
source venv/bin/activate
venv/bin/python watermark_model_better.py --train --epochs 10 --batch 16 --data-dir data/coco2017
```

---

## âœ… ç­‰æ•ˆæ€§ç¢ºèª

### è…³æœ¬åŠŸèƒ½åˆ†æ

`run_training.sh` è…³æœ¬æœƒè‡ªå‹•åŸ·è¡Œä»¥ä¸‹æ“ä½œï¼š

1. **è‡ªå‹•åˆ‡æ›åˆ°è…³æœ¬ç›®éŒ„**
   ```bash
   cd "$(dirname "$0")"
   ```
   - ç¢ºä¿åœ¨æ­£ç¢ºçš„ç›®éŒ„åŸ·è¡Œ

2. **è‡ªå‹•æ¿€æ´»è™›æ“¬ç’°å¢ƒ**
   ```bash
   if [ -f "venv/bin/activate" ]; then
       source venv/bin/activate
   fi
   ```
   - å¦‚æœè™›æ“¬ç’°å¢ƒå­˜åœ¨ï¼Œè‡ªå‹•æ¿€æ´»

3. **è‡ªå‹•é¸æ“‡ Python è§£é‡‹å™¨**
   ```bash
   if [ -f "venv/bin/python" ]; then
       PYTHON_CMD="venv/bin/python"
   elif [ -f "venv/bin/python3" ]; then
       PYTHON_CMD="venv/bin/python3"
   ...
   ```
   - å„ªå…ˆä½¿ç”¨ `venv/bin/python`
   - èˆ‡ç›´æ¥å‘½ä»¤ä½¿ç”¨ç›¸åŒçš„ Python è§£é‡‹å™¨

4. **å®Œæ•´åƒæ•¸å‚³é**
   ```bash
   $PYTHON_CMD watermark_model_better.py "$@"
   ```
   - `"$@"` æœƒå°‡æ‰€æœ‰å‘½ä»¤è¡Œåƒæ•¸åŸæ¨£å‚³éçµ¦ Python è…³æœ¬
   - åƒæ•¸é †åºå’Œå…§å®¹å®Œå…¨ä¸€è‡´

---

## ğŸ” é©—è­‰çµæœ

### åƒæ•¸å‚³éæ¸¬è©¦
- âœ… è…³æœ¬æ­£ç¢ºå‚³éæ‰€æœ‰åƒæ•¸
- âœ… `--help` åƒæ•¸æ­£å¸¸å·¥ä½œ
- âœ… æ‰€æœ‰è¨“ç·´åƒæ•¸éƒ½èƒ½æ­£ç¢ºè­˜åˆ¥

### Python è§£é‡‹å™¨
- âœ… è…³æœ¬ä½¿ç”¨ `venv/bin/python`
- âœ… èˆ‡ç›´æ¥å‘½ä»¤ä½¿ç”¨ç›¸åŒçš„ Python è§£é‡‹å™¨
- âœ… Python ç‰ˆæœ¬ä¸€è‡´

### ç’°å¢ƒè¨­ç½®
- âœ… è…³æœ¬è‡ªå‹•æ¿€æ´»è™›æ“¬ç’°å¢ƒ
- âœ… å·¥ä½œç›®éŒ„æ­£ç¢ºè¨­ç½®
- âœ… ç’°å¢ƒè®Šé‡ä¸€è‡´

---

## ğŸ“Š çµè«–

**âœ… ä½¿ç”¨è…³æœ¬è¨“ç·´èˆ‡ç›´æ¥ä½¿ç”¨ Python å‘½ä»¤å®Œå…¨ç­‰æ•ˆ**

### å„ªé»å°æ¯”

| ç‰¹æ€§ | è…³æœ¬æ–¹å¼ | ç›´æ¥å‘½ä»¤æ–¹å¼ |
|------|---------|------------|
| **è‡ªå‹•ç’°å¢ƒè¨­ç½®** | âœ… è‡ªå‹• | âŒ éœ€æ‰‹å‹• |
| **Python è·¯å¾‘** | âœ… è‡ªå‹•é¸æ“‡ | âœ… æ˜ç¢ºæŒ‡å®š |
| **åƒæ•¸å‚³é** | âœ… å®Œæ•´ | âœ… å®Œæ•´ |
| **éŒ¯èª¤è™•ç†** | âœ… æœ‰æª¢æŸ¥ | âŒ ç„¡æª¢æŸ¥ |
| **æ˜“ç”¨æ€§** | âœ… æ›´ç°¡å–® | âš ï¸ éœ€è¨˜ä½è·¯å¾‘ |

---

## ğŸ’¡ ä½¿ç”¨å»ºè­°

### æ¨è–¦ä½¿ç”¨è…³æœ¬æ–¹å¼

**å„ªé»**ï¼š
1. âœ… **æ›´ç°¡å–®**ï¼šä¸éœ€è¦è¨˜ä½ Python è·¯å¾‘
2. âœ… **æ›´å®‰å…¨**ï¼šè‡ªå‹•æª¢æŸ¥ç’°å¢ƒå’Œ Python è§£é‡‹å™¨
3. âœ… **æ›´ä¸€è‡´**ï¼šè‡ªå‹•è™•ç†ç’°å¢ƒè¨­ç½®
4. âœ… **æ›´éˆæ´»**ï¼šå¯ä»¥å¾ä»»ä½•ç›®éŒ„åŸ·è¡Œ

**å®Œæ•´å‘½ä»¤ç¤ºä¾‹**ï¼š

```bash
# åŸºç¤è¨“ç·´ï¼ˆä¸ä½¿ç”¨ VGGï¼‰
./run_training.sh --train --epochs 10 --batch 16 --data-dir data/coco2017

# ä½¿ç”¨ VGG æ„ŸçŸ¥æå¤±ï¼ˆæ¨è–¦ï¼‰
./run_training.sh --train --epochs 10 --batch 16 --use_vgg --data-dir data/coco2017

# ä½¿ç”¨æ›´å¤§çš„ batch sizeï¼ˆå„ªåŒ–æ€§èƒ½ï¼‰
./run_training.sh --train --epochs 10 --batch 24 --use_vgg --data-dir data/coco2017

# è‡ªå®šç¾©å­¸ç¿’ç‡
./run_training.sh --train --epochs 10 --batch 16 --lr 5e-5 --use_vgg --data-dir data/coco2017

# å¾æª¢æŸ¥é»æ¢å¾©è¨“ç·´
./run_training.sh --train --epochs 10 --batch 16 --resume ./checkpoints_improved/checkpoint_epoch_9.pth --data-dir data/coco2017
```

---

## âš ï¸ æ³¨æ„äº‹é …

### å…©ç¨®æ–¹å¼éƒ½éœ€è¦æ³¨æ„

1. **VGG åƒæ•¸**ï¼š
   - å…©ç¨®æ–¹å¼éƒ½éœ€è¦æ˜ç¢ºæ·»åŠ  `--use_vgg` æ‰æœƒå•Ÿç”¨ VGG
   - é»˜èªæƒ…æ³ä¸‹éƒ½ä¸ä½¿ç”¨ VGG

2. **åƒæ•¸é †åº**ï¼š
   - åƒæ•¸é †åºä¸å½±éŸ¿åŠŸèƒ½
   - ä½†å»ºè­°ä¿æŒä¸€è‡´çš„é †åºä»¥ä¾¿é–±è®€

3. **å·¥ä½œç›®éŒ„**ï¼š
   - è…³æœ¬æœƒè‡ªå‹•åˆ‡æ›åˆ°æ­£ç¢ºç›®éŒ„
   - ç›´æ¥å‘½ä»¤éœ€è¦åœ¨æ­£ç¢ºç›®éŒ„åŸ·è¡Œ

---

## ğŸ”§ æ•…éšœæ’æŸ¥

å¦‚æœè…³æœ¬ç„¡æ³•æ­£å¸¸å·¥ä½œï¼Œå¯ä»¥ï¼š

1. **æª¢æŸ¥è…³æœ¬æ¬Šé™**ï¼š
   ```bash
   chmod +x run_training.sh
   ```

2. **æª¢æŸ¥è™›æ“¬ç’°å¢ƒ**ï¼š
   ```bash
   ls -la venv/bin/python
   ```

3. **æ‰‹å‹•æ¸¬è©¦åƒæ•¸å‚³é**ï¼š
   ```bash
   ./run_training.sh --help
   ```

4. **ä½¿ç”¨ç›´æ¥å‘½ä»¤ä½œç‚ºå‚™é¸**ï¼š
   ```bash
   source venv/bin/activate
   venv/bin/python watermark_model_better.py --train --epochs 10 --batch 16 --data-dir data/coco2017
   ```

---

**æœ€å¾Œæ›´æ–°**: 2026-01-29
