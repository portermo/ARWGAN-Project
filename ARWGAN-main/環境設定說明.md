# ARWGAN 虛擬環境設定說明

## 前置需求

在建立虛擬環境之前，請確保已安裝 `python3-venv` 套件：

```bash
sudo apt install python3-venv
```

## 自動安裝方式

執行提供的安裝腳本：

```bash
cd /mnt/nvme/Project/arwgan/ARWGAN-Project/ARWGAN-main
./setup_venv.sh
```

## 手動安裝方式

如果自動安裝腳本無法執行，可以按照以下步驟手動建立：

### 1. 建立虛擬環境

```bash
cd /mnt/nvme/Project/arwgan/ARWGAN-Project/ARWGAN-main
python3 -m venv venv
```

### 2. 啟動虛擬環境

```bash
source venv/bin/activate
```

### 3. 升級 pip

```bash
pip install --upgrade pip
```

### 4. 安裝 PyTorch (CUDA 10.2 版本)

根據 README，需要安裝 PyTorch 1.12.1 + CUDA 10.2：

```bash
pip install torch==1.12.1+cu102 torchvision==0.13.1+cu102 --extra-index-url https://download.pytorch.org/whl/cu102
```

**注意**: 如果您使用的是不同的 CUDA 版本或 CPU 版本，請調整 PyTorch 安裝命令：
- CPU 版本: `pip install torch==1.12.1 torchvision==0.13.1`
- CUDA 11.x: 請查看 [PyTorch 官方網站](https://pytorch.org/get-started/previous-versions/) 獲取對應的安裝命令

### 5. 安裝其他依賴套件

```bash
pip install -r requirements.txt
```

### 6. 安裝 tensorboard_logger (如果需要)

如果程式執行時出現 `tensorboard_logger` 相關的錯誤，可能需要安裝：

```bash
pip install tensorboardX
```

或者，如果 `tensorboard_logger` 是專案中的自定義模組，請檢查是否有相關的 Python 檔案。

## 使用虛擬環境

### 啟動虛擬環境

```bash
source venv/bin/activate
```

啟動後，命令提示符前會顯示 `(venv)`。

### 退出虛擬環境

```bash
deactivate
```

## 環境需求

根據 README.md：
- Python == 3.7.4 (建議版本)
- Torch == 1.12.1 + cu102
- Torchvision == 0.13.1
- PIL (Pillow) == 7.2.0

### ⚠️ Python 版本相容性問題

**重要**: PyTorch 1.12.1 只支援 Python 3.7-3.10，不支援 Python 3.11 或更高版本。

如果您使用的是 Python 3.11 或更高版本（如 Python 3.12），有兩個選擇：

1. **推薦**: 使用 Python 3.7-3.10 建立虛擬環境
   ```bash
   # 如果系統中有 Python 3.10
   python3.10 -m venv venv
   ```

2. **替代方案**: 使用較新版本的 PyTorch（可能會有程式碼相容性問題）
   ```bash
   pip install torch torchvision
   ```
   注意：這可能會導致與原始程式碼的相容性問題，因為 API 可能有變化。

## 已安裝的套件清單

- torch==1.12.1+cu102
- torchvision==0.13.1+cu102
- Pillow==7.2.0
- numpy
- kornia (用於圖像處理，在 noise_layers 中使用)
- tensorboard (用於可選的 TensorBoard 日誌記錄)

## 疑難排解

### 問題: 無法建立虛擬環境

**解決方案**: 安裝 python3-venv
```bash
sudo apt install python3-venv
```

### 問題: PyTorch CUDA 版本不相容

**解決方案**: 根據您的 CUDA 版本調整 PyTorch 安裝命令，或使用 CPU 版本。

### 問題: 找不到 tensorboard_logger 模組

**解決方案**: 安裝 tensorboardX
```bash
pip install tensorboardX
```

### 問題: kornia 相關錯誤

**解決方案**: 確保已安裝 kornia
```bash
pip install kornia
```